<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experiência Minimalista - Profundidade</title>
    <style>
        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            color: white;
        }

        #container {
            display: none;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 90%;
            max-width: 500px;
        }

        .fade-in { animation: fadeIn 1.2s ease-out forwards; }

        .media-placeholder {
            width: 300px;
            max-width: 80vw;
            height: auto;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.1);
            object-fit: cover;
            transition: box-shadow 0.5s;
        }
        
        .media-placeholder.enigma-active {
             box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);
        }

        h1 {
            font-weight: 300;
            letter-spacing: 2px;
            font-size: 1.3rem;
            margin: 0 0 30px 0;
            min-height: 3em;
            line-height: 1.4;
        }

        #answer-input {
            display: none;
            background: none;
            border: none;
            border-bottom: 1px solid white;
            color: white;
            font-size: 1.2rem;
            text-align: center;
            padding: 10px;
            margin-bottom: 20px;
            outline: none;
            width: 100%;
            transition: border-color 0.3s;
        }

        .btn-next {
            background: none;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 10px 25px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: 0.3s;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
        }

        .btn-next:hover { background: white; color: black; border-color: white; }
        
        .btn-disabled { opacity: 0.5; cursor: default !important; pointer-events: none; }

        #intro-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            cursor: pointer;
        }

        #intro-overlay p { 
            border: 1px solid white; 
            padding: 15px 30px; 
            letter-spacing: 3px;
        }

        .player-wrapper { position: absolute; top: -999px; left: -999px; visibility: hidden; }

        .glitch-text { color: #666; font-size: 0.8rem; margin-top: 10px; opacity: 0.5; cursor: help; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div id="intro-overlay" onclick="startExperience()">
        <p>VOCÊ ESCOLHEU NÃO LEMBRAR</p>
    </div>

    <div id="container">
        <div id="content-area">
            <img src="" id="main-image" alt="Visual" class="media-placeholder">
            <h1 id="main-text"></h1>
        </div>
        
        <input type="text" id="answer-input" placeholder="Digite sua resposta..." autocomplete="off">

        <button class="btn-next" onclick="handleInteraction()" id="btn-next">
            CONTINUAR <span>→</span>
        </button>

        <div id="enigma-hint-1" class="glitch-text" style="display: none;">
            Em algum lugar
        </div>
    </div>

    <div class="player-wrapper">
        <div id="music-player"></div>
        <div id="sfx-player"></div>
    </div>

    <script>
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        const ID_MUSICA_1 = "dtW-AFYpH_A"; 
        const ID_MUSICA_2 = "ATzlzPLMUhc"; 
        const ID_SFX_CHAVE = "32qRYaN5Bck";

        let musicPlayer, sfxPlayer;
        let telaAtual = 0;
        let waitingForInitialAnswer = false;
        let enigmaStage = 0; 
        let apiReady = false;

        const telas1 = [
            { imagem: "https://i.pinimg.com/736x/2d/ce/6a/2dce6a194c1600e6caa43d6ee8cc2cbc.jpg", texto: "Seus dias vem sendo chatos, não?" },
            { imagem: "https://i.pinimg.com/736x/11/13/7e/11137e48dcef647650c26c6b834e0e9c.jpg", texto: "Você se lembra de quando morava com seus pais." },
            { imagem: "https://i.pinimg.com/736x/90/b9/05/90b905e64e03b5bc249f3cccc5f14bc3.jpg", texto: "Você sente que algo está faltando?" },
            { imagem: "https://i.pinimg.com/736x/8e/a8/e8/8ea8e83394f493c4c1014639d116ccbe.jpg", texto: "Você escolheu não lembrar disso." },
            { imagem: "https://i.pinimg.com/736x/e5/ba/34/e5ba34ae56098bfff99eea9a57d26229.jpg", texto: "O que você escolheu se tornar?" },
            { imagem: "https://i.pinimg.com/1200x/97/c9/cb/97c9cb0ae541b3375d613194911720cf.jpg", texto: "Por que não pediu ajuda?" },
            { imagem: "https://i.pinimg.com/736x/2f/ea/d2/2fead28a9cd651e86988518cb8de60bb.jpg", texto: "Quem é você?" } 
        ];

        const telas2 = [
            { imagem: "https://i.pinimg.com/736x/98/9e/4b/989e4b57ef8634293324154205371386.jpg", texto: "Então você finalmente admitiu." },
            { imagem: "https://i.pinimg.com/736x/83/b8/fd/83b8fdf20c4bb28d953eb2119a583ac1.jpg", texto: "Não ser, é confortável." },
            { imagem: "https://i.pinimg.com/736x/bb/85/88/bb858827d07107f4033a311571207931.jpg", texto: "Ninguém precisa lembrar." },
            { imagem: "https://i.pinimg.com/736x/9b/87/67/9b8767929fda928fd2be00c301ea2f7c.jpg", texto: "Um dia você vai lembrar." },
            { imagem: "https://i.pinimg.com/736x/af/62/57/af62573f91317e1d00988472a7a9ab37.jpg", texto: "Bem-vindo ao seu verdadeiro eu." }
        ];

        const telasFinal = [
            { imagem: "https://i.pinimg.com/originals/67/c2/9f/67c29f05323515348f4fe8e922a164c3.gif", texto: "Suas memórias se embaralham." },
            { imagem: "https://i.pinimg.com/736x/12/b0/21/12b021d0a03940fcf1ce14797fd2dc63.jpg", texto: "Sua esperança mora na ignorância." },
            { imagem: "https://i.pinimg.com/736x/46/fa/57/46fa575e75bc06785dd6b79354b49c5d.jpg", texto: "Esqueça." },
            { imagem: "https://i.pinimg.com/1200x/a3/1f/ba/a31fba94a7764bf6f8992b8a596df8f9.jpg", texto: "Corte as cordas." },
            { imagem: "https://i.pinimg.com/736x/95/f5/49/95f5494d08581fc081a2f8da815dd276.jpg", texto: "Descanse agora." }
        ];

        const telasRealFinal = [
            { imagem: "https://i.pinimg.com/1200x/9f/eb/0e/9feb0ec011ab4ab5c764a0fa5bb9d7a7.jpg", texto: "Uma porta se abriu." },
            { imagem: "https://i.pinimg.com/1200x/06/c6/d4/06c6d4c52e34e361962a5ff98370df96.jpg", texto: "..." },
            { imagem: "https://i.pinimg.com/736x/ab/5e/62/ab5e6298203944f44b4cbac49ed951bd.jpg", texto: "Encontre você." },
            { imagem: "https://i.pinimg.com/736x/42/cc/52/42cc52e7b845ab1ee38de1b12dc5d3e3.jpg", texto: "Prepare-se para acordar." },
            { imagem: "https://i.pinimg.com/736x/fb/71/a4/fb71a43401cc479dec8d8cfac948288e.jpg", texto: "Acabe." }
        ];

        let sequenceActive = telas1;

        function onYouTubeIframeAPIReady() {
            musicPlayer = new YT.Player('music-player', {
                height: '0', width: '0',
                videoId: ID_MUSICA_1,
                playerVars: { 'autoplay': 0, 'controls': 0, 'enablejsapi': 1, 'origin': window.location.origin },
                events: { 'onReady': () => { apiReady = true; } }
            });

            sfxPlayer = new YT.Player('sfx-player', {
                height: '0', width: '0',
                videoId: ID_SFX_CHAVE,
                playerVars: { 'autoplay': 0, 'controls': 0, 'enablejsapi': 1, 'origin': window.location.origin }
            });
        }

        function startExperience() {
            document.getElementById('intro-overlay').style.display = 'none';
            document.getElementById('container').style.display = 'flex';
            updateContent();
            if (musicPlayer && musicPlayer.playVideo) {
                musicPlayer.playVideo();
            } else {
                setTimeout(startExperience, 500);
            }
        }

        function handleInteraction() {
            if (enigmaStage === 1) checkFirstEnigma();
            else if (enigmaStage === 2) checkSecondEnigma();
            else if (enigmaStage === 3) checkThirdEnigma();
            else if (enigmaStage === 4) checkFourthEnigma();
            else if (waitingForInitialAnswer) checkInitialAnswer();
            else nextScreen();
        }

        function nextScreen() {
            if (telaAtual < sequenceActive.length - 1) {
                telaAtual++;
                updateContent();
                if (sequenceActive === telas1 && telaAtual === telas1.length - 1) {
                    if (musicPlayer && musicPlayer.pauseVideo) musicPlayer.pauseVideo(); 
                    showInput("Quem é você?", "RESPONDER");
                    waitingForInitialAnswer = true;
                }
                // Dispara o enigma final após o texto "Acabe"
                if (sequenceActive === telasRealFinal && telaAtual === telasRealFinal.length - 1) {
                    setTimeout(triggerThirdEnigma, 1500);
                }
            } else {
                if (sequenceActive === telas2) triggerFirstEnigma();
                else if (sequenceActive === telasFinal) triggerSecondEnigma();
            }
        }

        function showInput(placeholder, btnText) {
            const input = document.getElementById('answer-input');
            input.style.display = 'block';
            input.placeholder = placeholder;
            input.value = "";
            input.focus();
            document.getElementById('btn-next').innerHTML = btnText;
        }

        function checkInitialAnswer() {
            const input = document.getElementById('answer-input');
            const answer = input.value.toLowerCase().trim();
            if (answer === "ninguém" || answer === "ninguem") {
                successFeedback();
                setTimeout(() => {
                    if (musicPlayer && musicPlayer.loadVideoById) musicPlayer.loadVideoById(ID_MUSICA_2);
                    sequenceActive = telas2;
                    telaAtual = 0;
                    waitingForInitialAnswer = false;
                    input.style.display = 'none';
                    document.getElementById('btn-next').innerHTML = "CONTINUAR <span>→</span>";
                    updateContent();
                }, 2000); 
            } else errorFeedback();
        }

        function triggerFirstEnigma() {
            enigmaStage = 1;
            document.getElementById('enigma-hint-1').style.display = 'block';
            showInput("Insira a chave...", "ABRIR O VAZIO");
            console.clear();
            console.log("%c SISTEMA CORROMPIDO - NÍVEL 1", "color: red; font-size: 16px; font-weight: bold;");
            console.log("Decifre o eco: QU5URVMgRE8gRklN");
        }

        function checkFirstEnigma() {
            const answer = document.getElementById('answer-input').value.toLowerCase().trim();
            if (answer === "antes do fim") {
                successFeedback();
                setTimeout(() => {
                    enigmaStage = 0;
                    sequenceActive = telasFinal;
                    telaAtual = 0;
                    document.getElementById('answer-input').style.display = 'none';
                    document.getElementById('enigma-hint-1').style.display = 'none';
                    document.getElementById('btn-next').innerHTML = "CONTINUAR <span>→</span>";
                    updateContent();
                }, 1500);
            } else errorFeedback();
        }

        function triggerSecondEnigma() {
            enigmaStage = 2;
            const img = document.getElementById('main-image');
            img.classList.add('enigma-active');
            img.alt = "01000100 01000101 01010100 01010000 01000101 01010010 01010100 01000001 01010010";
            showInput("Qual é o seu propósito?", "TRANSCENDER");
        }

        function checkSecondEnigma() {
            const answer = document.getElementById('answer-input').value.toLowerCase().trim();
            if (answer === "despertar") {
                successFeedback();
                setTimeout(() => {
                    enigmaStage = 0;
                    sequenceActive = telasRealFinal;
                    telaAtual = 0;
                    document.getElementById('answer-input').style.display = 'none';
                    document.getElementById('btn-next').innerHTML = "CONTINUAR <span>→</span>";
                    updateContent();
                }, 1500);
            } else errorFeedback();
        }

        // --- ENIGMA FINAL (BAPHOMET / ATBASH / GNOSIS) ---

        function triggerThirdEnigma() {
            enigmaStage = 3;
            document.getElementById('main-text').innerText = "O que está em cima é como o que está embaixo.";
            showInput("aleph por tav", "REVELAR");
            console.log("%c ENIGMA FINAL - PARTE 1", "color: gold; font-weight: bold;");
            console.log("");
        }

        function checkThirdEnigma() {
            const answer = document.getElementById('answer-input').value.toLowerCase().trim();
            // A resposta é Sophia (Sabedoria)
            if (answer === "sophia") {
                successFeedback();
                setTimeout(triggerFourthEnigma, 1500);
            } else errorFeedback();
        }

        function triggerFourthEnigma() {
            enigmaStage = 4;
            document.getElementById('main-image').src = "https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/L%C3%A9o_Taxil-Myst%C3%A8res_de_la_Franc-Ma%C3%A7onnerie-gravure_52.jpg/250px-L%C3%A9o_Taxil-Myst%C3%A8res_de_la_Franc-Ma%C3%A7onnerie-gravure_52.jpg";
            document.getElementById('main-text').innerText = "A Sabedoria do copta de 1773.";
            showInput("Quem deve ser redimida?", "FINALIZAR");
            console.log("");
        }

        function checkFourthEnigma() {
            const answer = document.getElementById('answer-input').value.toLowerCase().trim();
            // A resposta é Pistis Sophia (O nome do livro/entidade)
            if (answer === "pistis sophia") {
                successFeedback();
                finishExperience();
            } else errorFeedback();
        }

        function finishExperience() {
            const container = document.getElementById('container');
            container.innerHTML = `
                <div class="fade-in" style="font-family: serif; font-style: italic;">
                    <h1 style="font-size: 1.5rem;">VOCÊ FINALMENTE ACORDOU.</h1>
                    <p style="opacity: 0.6; letter-spacing: 5px;">O CÍRCULO ESTÁ QUEBRADO.</p>
                </div>
            `;
            if (musicPlayer && musicPlayer.stopVideo) musicPlayer.stopVideo();
        }

        // --- FEEDBACKS ---

        function successFeedback() {
            if (sfxPlayer && sfxPlayer.playVideo) sfxPlayer.playVideo();
            document.getElementById('answer-input').style.borderColor = "#00ff00";
            document.body.style.backgroundColor = "#111";
            setTimeout(() => { document.body.style.backgroundColor = "#000"; }, 200);
        }

        function errorFeedback() {
            const input = document.getElementById('answer-input');
            input.style.borderColor = "red";
            input.value = "";
            setTimeout(() => { input.style.borderColor = "white"; }, 500);
        }

        function updateContent() {
            const area = document.getElementById('content-area');
            const img = document.getElementById('main-image');
            const text = document.getElementById('main-text');
            if(enigmaStage !== 2) img.alt = "Visual";
            area.classList.remove('fade-in');
            void area.offsetWidth; 
            area.classList.add('fade-in');
            img.src = sequenceActive[telaAtual].imagem;
            text.innerText = sequenceActive[telaAtual].texto;
        }

        document.getElementById('answer-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleInteraction();
        });
    </script>
</body>
</html>